{"version":3,"sources":["shared/utils/objects/filterWithRules.js"],"names":["filterWithRulesLoop","rules","obj","basePropPath","Object","keys","reduce","acc","key","propPath","Error","filterWithRules"],"mappings":"AAAA,SAASA,mBAAT,CAA6BC,KAA7B,EAAoCC,GAApC,EAAyCC,eAAe,EAAxD,EAA4D;AAC1D,SAAOC,OAAOC,IAAP,CAAYJ,KAAZ,EAAmBK,MAAnB,CAA0B,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC7C,UAAMC,WAAWN,iBAAiB,EAAjB,GAAuB,GAAEA,YAAa,IAAGK,GAAI,EAA7C,GAAiDA,GAAlE;;AAEA,QAAI,OAAOP,MAAMO,GAAN,CAAP,KAAsB,QAA1B,EAAoC;AAClC,UAAI,OAAON,IAAIM,GAAJ,CAAP,KAAoB,QAAxB,EAAkC;AAChC,cAAM,IAAIE,KAAJ,CAAW,0BAAyBD,QAAS,mBAA7C,CAAN;AACD;AACDF,UAAIC,GAAJ,IAAWR,oBAAoBC,MAAMO,GAAN,CAApB,EAAgCN,IAAIM,GAAJ,CAAhC,EAA0CC,QAA1C,CAAX,CAJkC,CAI8B;AACjE,KALD,MAKO,IAAIR,MAAMO,GAAN,CAAJ,EAAgB;AACrB,UAAI,OAAON,IAAIM,GAAJ,CAAP,KAAoB,WAAxB,EAAqC;AACnC,cAAM,IAAIE,KAAJ,CAAW,kCAAiCD,QAAS,2DAArD,CAAN;AACD;AACDF,UAAIC,GAAJ,IAAWN,IAAIM,GAAJ,CAAX,CAJqB,CAIA;AACtB;AACD,WAAOD,GAAP;AACD,GAfM,EAeJ,EAfI,CAAP;AAgBD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,eAAe,SAASI,eAAT,CAAyBV,KAAzB,EAAgCC,GAAhC,EAAqC;AAClD,SAAOF,oBAAoBC,KAApB,EAA2BC,GAA3B,CAAP;AACD","file":"filterWithRules.js","sourceRoot":"/Users/Adam/Dev/listman","sourcesContent":["function filterWithRulesLoop(rules, obj, basePropPath = '') {\n  return Object.keys(rules).reduce((acc, key) => {\n    const propPath = basePropPath !== '' ? `${basePropPath}.${key}` : key;\n\n    if (typeof rules[key] === 'object') {\n      if (typeof obj[key] !== 'object') {\n        throw new Error(`Expected prop at path \"${propPath}\" to be an object`);\n      }\n      acc[key] = filterWithRulesLoop(rules[key], obj[key], propPath); // eslint-disable-line no-param-reassign,max-len\n    } else if (rules[key]) {\n      if (typeof obj[key] === 'undefined') {\n        throw new Error(`Filter set an \"allow\" on path \"${propPath}\", however, this path was not found on the source object.`);\n      }\n      acc[key] = obj[key]; // eslint-disable-line no-param-reassign\n    }\n    return acc;\n  }, {});\n}\n\n/**\n * Applies a rules object to filter a given object's structure.\n *\n * The rules object should match the shape of the source object and should\n * have a truthy/falsey value indicating if a property should be included/\n * excluded.  If the filters do not contain a property that exists on the\n * source object then the respective property will be excluded.\n *\n * @param  {Object} rules : The filter rules.\n * @param  {Object} obj   : The object to filter.\n *\n * @return {Object}\n *   The filtered object.\n *\n * @example\n *   filter(\n *     // rules\n *     {\n *       foo: { bar: true },\n *       poop: true\n *     },\n *     // source\n *     {\n *       foo: { bar: 'bar', qux: 'qux' },\n *       bob: 'bob',\n *       poop: { plop: 'splash' }\n *     },\n *   )\n */\nexport default function filterWithRules(rules, obj) {\n  return filterWithRulesLoop(rules, obj);\n}\n"]}